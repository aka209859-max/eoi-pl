{
  "audit_meta": {
    "generated_at": "2026-01-22T13:54:26.985990+09:00",
    "model_version": "v1.0-PL-PowerEP",
    "target_date": "2025_0101",
    "data_hash": "996e5c32de29ddb4",
    "model_hash": "a7422420bfe33b3b",
    "code_hash": "git:448655b",
    "model_family": "pl_powerep",
    "alpha": 0.5,
    "training_unique_horses": 6179
  },
  "data_quality": {
    "total_races": 27279,
    "total_entries": 281742,
    "unique_horses": 20916,
    "join_success_rate": 1.0,
    "missing_rates": {
      "kakutei_chakujun": 0.020273867580978343
    },
    "forbidden_columns_detected": false,
    "forbidden_check": {
      "odds_columns": [],
      "popularity_columns": [],
      "status": "PASS"
    }
  },
  "exclusion_audit": {
    "dnf_missing_rank_count": 5712,
    "status_exclusion_count": 0,
    "exclusion_rate": 0.020273867580978343,
    "reasons": {
      "missing_rank": 5712
    },
    "sample_race_ids": []
  },
  "model_training": {
    "algorithm": "Plackett-Luce + Power EP",
    "learning_method": "ListMLE",
    "alpha": 0.5,
    "training_period": "2024",
    "num_horses": 6179,
    "training_unique_horses": 6179,
    "converged": false,
    "iterations": 50,
    "final_loss": 12582.382535291401
  },
  "calibration_audit": {
    "method": "isotonic_regression",
    "split_method": "race_id単位分割（同一レースのエントリーは同じsplitに配置）",
    "split": {
      "train_races": 592,
      "calib_races": 197,
      "test_races": 199,
      "train_samples": 5918,
      "calib_samples": 2023,
      "test_samples": 2059
    },
    "data_leak_check": {
      "train_calib_overlap": 0,
      "train_test_overlap": 0,
      "calib_test_overlap": 0,
      "leak_detected": false
    },
    "ece_before": 0.13847915317311335,
    "mce_before": 0.8359192541149242,
    "ece_after": 0.007273102023648755,
    "mce_after": 0.025511451782955274,
    "improvement_ece": 0.1312060511494646,
    "improvement_mce": 0.810407802331969,
    "leak_causes": [
      "ECE after < 0.01（過適合の可能性）"
    ],
    "leak_warning": "ECE after < 0.01（過適合の可能性）"
  },
  "selection_audit": {
    "method": "risk_coverage_curve",
    "definition": {
      "risk": "1 - accuracy (誤り率)",
      "coverage": "採用率（閾値以上の予測割合）",
      "auc_calculation": "∫ risk d(coverage) 台形則 (coverage 0→1)",
      "interpretation": "AUC-RCC が小さいほど良い（低リスク高カバレッジ）"
    },
    "rcc_curve_sample": [
      {
        "threshold": 0.8,
        "coverage": 0.001,
        "risk": 0.0,
        "accuracy": 1.0
      },
      {
        "threshold": 0.75,
        "coverage": 0.001,
        "risk": 0.0,
        "accuracy": 1.0
      },
      {
        "threshold": 0.7,
        "coverage": 0.007,
        "risk": 0.2857142857142857,
        "accuracy": 0.7142857142857143
      },
      {
        "threshold": 0.6499999999999999,
        "coverage": 0.015,
        "risk": 0.33333333333333337,
        "accuracy": 0.6666666666666666
      },
      {
        "threshold": 0.6,
        "coverage": 0.035,
        "risk": 0.48571428571428577,
        "accuracy": 0.5142857142857142
      },
      {
        "threshold": 0.55,
        "coverage": 0.065,
        "risk": 0.5384615384615384,
        "accuracy": 0.46153846153846156
      },
      {
        "threshold": 0.5,
        "coverage": 0.111,
        "risk": 0.46846846846846846,
        "accuracy": 0.5315315315315315
      },
      {
        "threshold": 0.44999999999999996,
        "coverage": 0.177,
        "risk": 0.4689265536723164,
        "accuracy": 0.5310734463276836
      },
      {
        "threshold": 0.3999999999999999,
        "coverage": 0.246,
        "risk": 0.44308943089430897,
        "accuracy": 0.556910569105691
      },
      {
        "threshold": 0.35,
        "coverage": 0.325,
        "risk": 0.43692307692307697,
        "accuracy": 0.563076923076923
      }
    ],
    "auc_rcc": 0.4679128945617204,
    "num_points": 17
  },
  "tie_audit": {
    "total_entries": 10000,
    "tie_count": 12,
    "tie_rate": 0.0012,
    "definition": "同一順位が発生したエントリー数 / 総エントリー数",
    "note": "Ties included in training and evaluation"
  },
  "prediction_audit": {
    "total_races": 10,
    "sanrenpuku_max": 9,
    "sanrentan_max": 12,
    "constraint_violations": 0
  },
  "compliance": {
    "odds_used": false,
    "freeze": true,
    "generation_count": 1,
    "forbidden_check": "PASS",
    "betting_constraints": "PASS"
  }
}